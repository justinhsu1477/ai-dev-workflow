server:
  port: 8081

spring:
  application:
    name: ai-dev-workflow

# Claude API 設定
claude:
  api-key: ${CLAUDE_API_KEY:your-api-key-here}
  model: claude-sonnet-4-5-20250929
  model-complex: claude-opus-4-6
  max-tokens: 4096
  timeout-seconds: 60

# Azure DevOps 設定
azure-devops:
  organization: ${AZURE_DEVOPS_ORG:your-org}
  project: ${AZURE_DEVOPS_PROJECT:your-project}
  pat: ${AZURE_DEVOPS_PAT:your-pat-here}
  base-url: https://dev.azure.com

# Teams 通知
teams:
  webhook-url: ${TEAMS_WEBHOOK_URL:}

# API 呼叫頻率限制
rate-limit:
  claude-api:
    requests-per-minute: 10
    requests-per-hour: 100

# Playwright 瀏覽器設定（E2E 測試用）
playwright:
  # Chromium 執行檔路徑（Docker 中使用系統安裝的 Chromium，本機留空則自動下載）
  chromium-path: ${PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH:}

# 工作流程設定
workflow:
  failure-analysis:
    enabled: true
    # 僅在這些分支觸發（逗號分隔）
    branches: main,develop
    # 送給 AI 分析的最大 log 行數
    max-log-lines: 500
  e2e-testing:
    enabled: true
    # 要測試的 staging/dev 環境 URL
    staging-url: ${E2E_STAGING_URL:}
    # 應用程式描述（幫助 AI 規劃測試步驟）
    app-description: ${E2E_APP_DESCRIPTION:}
    # 監聽的 Repository 名稱（Azure DevOps repo name）
    repository: BA.WeiChuan.OCDS.Web.v2
    # 只有這些分支的 push 才觸發 E2E 測試（逗號分隔）
    branches: ai-dev-workflow
    # 每次測試的最大步驟數
    max-steps: 30
    # 整個測試的逾時時間（秒）
    timeout-seconds: 300
    # 每個步驟後截圖（截圖直接上傳到 Azure DevOps Work Item 附件，不存本機）
    screenshot-each-step: true
  test-generation:
    enabled: false
  bug-fix:
    enabled: false

# 健康檢查端點
management:
  endpoints:
    web:
      exposure:
        include: health,info
